{"version":3,"file":"programmeadmin.min.js","sources":["../src/programmeadmin.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\ndefine(['jquery', 'core/str'], function ($, str) {\n\n    const strings = [\n        {\n            key: 'dashboard_students',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'student_due_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'student_nonsub_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'student_late_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'student_graded_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'student_low_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'dashboard_assessments',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'tutortblheader_assessment_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'tutortblheader_nonsubmissions_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'tutortblheader_latesubmissions_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'tutortblheader_graded_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'tutortblheader_lowgrades_info',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'email_dept_subject',\n            component: 'report_myfeedback',\n        },\n        {\n            key: 'show',\n            component: 'core',\n        },\n        {\n            key: 'hide',\n            component: 'core',\n        },\n    ];\n\n    return {\n        init: function () {\n            $(document).ready(function () {\n\n                // Populate strings.\n                const stringResults = {};\n                str.get_strings(strings).then(results => results.forEach((val, key) => {\n                    const string = strings[key];\n                    stringResults[string.key] = val;\n                }));\n\n                $('#wait').css({'cursor': 'default', 'display': 'none'});\n                $('body').css('cursor', 'default');\n\n                $('#deptSelect').change(function () {\n                    $('#prog_form_dept').submit();\n                });\n                $('#progSelect').change(function () {\n                    $('#prog_form_prog').submit();\n                });\n                $('#progmodSelect').change(function () {\n                    $('#prog_form_mod').submit();\n                });\n                $('.progmodClick').click(function () {\n                    $(this).closest('.permod').find('.prog_form_mod_click').submit();\n                });\n\n                $('.reportPrint').on('click', function () {\n                    print();\n                });\n\n                $('.x_port').on('click', function () {\n                    window.location.href = 'export.php';\n                });\n\n                $('.sToggle').click(function () {\n                    $(this).closest('#selected-prog-container').find('.progtable').show();\n                    $(this).closest('#selected-prog-container').find('.permod').hide();\n                    $(this).closest('#selected-prog-container').find('.ptutor').hide();\n                    $(this).closest('#selected-prog-container').find('tr.recordRow').show();\n                    $('.overallgrade').hide();\n                    $('span.studentsassessed').text(stringResults.dashboard_assesments);\n                    $('.studentimgdue').attr('title', stringResults.tutortblheader_assessment_info);\n                    $('.studentimgnon').attr('title', stringResults.tutortblheader_nonsubmissions_info);\n                    $('.studentimglate').attr('title', stringResults.tutortblheader_latesubmissions_info);\n                    $('.studentimggraded').attr('title', stringResults.tutortblheader_graded_info);\n                    $('.studentimglow').attr('title', stringResults.tutortblheader_lowgrades_info);\n                    $('.assessdue').show();\n                    $(this).closest('#selected-prog-container').find('table.tutor-inner.stuRec').show();\n                    $(this).closest('#selected-prog-container').find('span.sToggle').css({\n                        'background-color': '#619eb6',\n                        'color': '#fff'\n                    });\n                    $(this).closest('#selected-prog-container').find('span.aToggle').css({\n                        'background-color': '#f5f5f5',\n                        'color': '#444'\n                    });\n                    $(this).closest('#selected-prog-container').find('span.pToggle').css({\n                        'background-color': '#f5f5f5',\n                        'color': '#444'\n                    });\n                });\n                $('.aToggle').click(function () {\n                    $(this).closest('#selected-prog-container').find('.progtable').show();\n                    $(this).closest('#selected-prog-container').find('tr.recordRow').hide();\n                    $(this).closest('#selected-prog-container').find('.ptutor').hide();\n                    $(this).closest('#selected-prog-container').find('.permod').show();\n                    $(this).closest('#selected-prog-container').find('table.tutor-inner.stuRec').hide();\n                    $('.progtable .modangle').text('\\u25bc');\n                    $(this).closest('#selected-prog-container').find('span.aToggle').css({\n                        'background-color': '#619eb6',\n                        'color': '#fff'\n                    });\n                    $(this).closest('#selected-prog-container').find('span.sToggle').css({\n                        'background-color': '#f5f5f5',\n                        'color': '#444'\n                    });\n                    $(this).closest('#selected-prog-container').find('span.pToggle').css({\n                        'background-color': '#f5f5f5',\n                        'color': '#444'\n                    });\n                });\n\n                $('.modass').click(function () {\n                    $('.overallgrade').show();\n                    $('span.studentsassessed').text(stringResults.dashboard_students);\n                    $('.studentimgdue').attr('title', stringResults.student_due_info);\n                    $('.studentimgnon').attr('title', stringResults.student_nonsub_info);\n                    $('.studentimglate').attr('title', stringResults.student_late_info);\n                    $('.studentimggraded').attr('title', stringResults.student_graded_info);\n                    $('.studentimglow').attr('title', stringResults.student_low_info);\n                });\n\n                $('.pToggle').click(function () {\n                    $(this).closest('#selected-prog-container').find('.progtable').hide();\n                    $(this).closest('#selected-prog-container').find('.ptutor').show();\n                    $(this).closest('#selected-prog-container').find('span.pToggle').css({\n                        'background-color': '#619eb6',\n                        'color': '#fff'\n                    });\n                    $(this).closest('#selected-prog-container').find('span.sToggle').css({\n                        'background-color': '#f5f5f5',\n                        'color': '#444'\n                    });\n                    $(this).closest('#selected-prog-container').find('span.aToggle').css({\n                        'background-color': '#f5f5f5',\n                        'color': '#444'\n                    });\n                });\n\n                $('.assess-br').click(function () {\n                    var thisAs = $(this).closest('.assRec');\n                    var rem = '.stuRec.' + $(thisAs).attr('data-aid');\n                    if ($(rem).is(':visible')) {\n                        $(rem).nextUntil('.settableheight').hide();\n                        $(rem).hide();\n                        $('.assessdue').hide();\n                        $(thisAs).find('.modangle').text('\\u25bc');\n                    } else if ($(rem).is(':hidden')) {\n                        $(rem).nextUntil(':not(rem)').show();\n                        $(rem).show();\n                        $('.assessdue').hide();\n                        $(thisAs).find('.modangle').text('\\u25b2');\n                    }\n                });\n\n                $('u.hidetable').click(function () {\n                    var thisEl = $(this).closest('td.maintable').find('table.innertable');\n                    if ($(thisEl).is(':visible')) {\n                        $(thisEl).hide();\n                        $(this).text(stringResults.show);\n                    } else if ($(thisEl).is(':hidden')) {\n                        $(thisEl).show();\n                        $(this).text(stringResults.hide);\n                    }\n                });\n\n                $('#selectall1').change(function () {\n                    $('.chk2').prop('checked', $(this).prop('checked'));\n                });\n                $(\"#emailform1\").click(function () {\n                    var mylink1 = [];\n                    $(\"input:checked\").each(function () {\n                        if ($(this).val() != 'on') {\n                            mylink1.push($(this).val());\n                        }\n                    });\n                    if (mylink1.length > 0) {\n                        $(\"a#mail1\").attr(\"href\", \"mailto:?bcc=\" + mylink1.join(\";\") + \"&Subject=\"\n                            + stringResults.email_dept_subject);\n                    }\n                });\n\n                $('td#assess-name').css({\n                    'max-width': '300px',\n                    'white-space': 'nowrap',\n                    'overflow': 'hidden',\n                    'text-overflow': 'ellipsis'\n                });\n            });\n        }\n    };\n});\n"],"names":["define","$","str","strings","key","component","init","document","ready","stringResults","get_strings","then","results","forEach","val","css","change","submit","click","this","closest","find","on","print","window","location","href","show","hide","text","dashboard_assesments","attr","tutortblheader_assessment_info","tutortblheader_nonsubmissions_info","tutortblheader_latesubmissions_info","tutortblheader_graded_info","tutortblheader_lowgrades_info","dashboard_students","student_due_info","student_nonsub_info","student_late_info","student_graded_info","student_low_info","thisAs","rem","is","nextUntil","thisEl","prop","mylink1","each","push","length","join","email_dept_subject"],"mappings":"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"}