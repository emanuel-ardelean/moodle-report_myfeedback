{"version":3,"file":"personaltutor.min.js","sources":["../src/personaltutor.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Helper function to build JS vendor path.\n *\n * @param {string} path\n * @returns {string}\n */\nconst vendorJSURL = function(path) {\n    return M.cfg.wwwroot + '/report/myfeedback/vendor/js/' + path + '.min';\n};\n\nrequire.config({\n    paths: {\n        'datatables.net': vendorJSURL('jquery.dataTables'),\n        'datatables.net-buttons': vendorJSURL('dataTables.buttons'),\n        'datatables.net-colreorder': vendorJSURL('dataTables.colReorder'),\n        'datatables.net-fixedheader': vendorJSURL('dataTables.fixedHeader'),\n        'datatables.net-responsive': vendorJSURL('dataTables.responsive'),\n    },\n});\n\ndefine([\n    'jquery',\n    'core/str',\n    'datatables.net',\n    'datatables.net-buttons',\n    'datatables.net-colreorder',\n    'datatables.net-fixedheader',\n    'datatables.net-responsive',\n], function($, str) {\n\n    return {\n        init: function() {\n            $(document).ready(function() {\n\n                $('#wait').css({'cursor':'default','display':'none'});\n                $('body').css('cursor', 'default');\n\n                $('#tutortable').DataTable({\n                    'dom': 'lfBrtip',\n                    fixedHeader: true,\n                    'order': [1, 'asc' ],\n                    'columnDefs': [\n                        {'orderable': false, 'targets': 0 }],\n                    buttons: [ 'colvis' ],\n                    responsive: true\n                });\n\n                $('#selectall').change(function(){\n                    $('.chk1').prop('checked', $(this).prop('checked'));\n                });\n                $(\"#emailform\").click(function() {\n                    var mylink = [];\n                    $(\"input:checked\").each(function(){\n                        if ($(this).val() != 'on') {\n                            mylink.push($(this).val());\n                        }\n                    });\n                    if (mylink.length > 0) {\n                        str.get_string('email_tutee_subject', 'report_myfeedback').then((email_tutee_subject) => {\n                            $(\"a#mail\").attr(\"href\", \"mailto:?bcc=\" + mylink.join(\";\") + \"&Subject=\" + email_tutee_subject + \"\");\n                        });\n                    }\n                });\n\n                $('.reportPrint').on( 'click', function () {\n                    print();\n                });\n\n                $('.ex_port').on( 'click', function() {\n                    window.location.href= 'export.php';\n                });\n\n                $('.tutorCanvas').click(function(){\n                    var thisEl = $(this).closest('tr.recordRow ').find('table.accord');\n                    if($(thisEl).is(':visible')) {\n                        $(this).closest('.recordRow').find('table.accord').hide();\n                        $(this).closest('.recordRow').find('.tangle').text('\\u25bc');\n                    } else if ($(thisEl).is(':hidden')) {\n                        $(this).closest('.recordRow').find('table.accord').show();\n                        $(this).closest('.recordRow').find('.tangle').text('\\u25b2');\n                    }\n                });\n            });\n        }\n    };\n});\n"],"names":["vendorJSURL","path","M","cfg","wwwroot","require","config","paths","define","$","str","init","document","ready","css","DataTable","fixedHeader","buttons","responsive","change","prop","this","click","mylink","each","val","push","length","get_string","then","email_tutee_subject","attr","join","on","print","window","location","href","thisEl","closest","find","is","hide","text","show"],"mappings":"AAqBA,IAAMA,YAAc,SAASC,aAClBC,EAAEC,IAAIC,QAAU,gCAAkCH,KAAO,QAGpEI,QAAQC,OAAO,CACXC,MAAO,kBACeP,YAAY,8CACJA,YAAY,kDACTA,YAAY,sDACXA,YAAY,sDACbA,YAAY,4BAIjDQ,yCAAO,CACH,SACA,WACA,iBACA,yBACA,4BACA,6BACA,8BACD,SAASC,EAAGC,WAEJ,CACHC,KAAM,WACFF,EAAEG,UAAUC,OAAM,WAEdJ,EAAE,SAASK,IAAI,QAAU,kBAAoB,SAC7CL,EAAE,QAAQK,IAAI,SAAU,WAExBL,EAAE,eAAeM,UAAU,KAChB,UACPC,aAAa,QACJ,CAAC,EAAG,kBACC,CACV,YAAc,UAAkB,IACpCC,QAAS,CAAE,UACXC,YAAY,IAGhBT,EAAE,cAAcU,QAAO,WACnBV,EAAE,SAASW,KAAK,UAAWX,EAAEY,MAAMD,KAAK,eAE5CX,EAAE,cAAca,OAAM,eACdC,OAAS,GACbd,EAAE,iBAAiBe,MAAK,WACC,MAAjBf,EAAEY,MAAMI,OACRF,OAAOG,KAAKjB,EAAEY,MAAMI,UAGxBF,OAAOI,OAAS,GAChBjB,IAAIkB,WAAW,sBAAuB,qBAAqBC,MAAK,SAACC,qBAC7DrB,EAAE,UAAUsB,KAAK,OAAQ,eAAiBR,OAAOS,KAAK,KAAO,YAAcF,2BAKvFrB,EAAE,gBAAgBwB,GAAI,SAAS,WAC3BC,WAGJzB,EAAE,YAAYwB,GAAI,SAAS,WACvBE,OAAOC,SAASC,KAAM,gBAG1B5B,EAAE,gBAAgBa,OAAM,eAChBgB,OAAS7B,EAAEY,MAAMkB,QAAQ,iBAAiBC,KAAK,gBAChD/B,EAAE6B,QAAQG,GAAG,aACZhC,EAAEY,MAAMkB,QAAQ,cAAcC,KAAK,gBAAgBE,OACnDjC,EAAEY,MAAMkB,QAAQ,cAAcC,KAAK,WAAWG,KAAK,MAC5ClC,EAAE6B,QAAQG,GAAG,aACpBhC,EAAEY,MAAMkB,QAAQ,cAAcC,KAAK,gBAAgBI,OACnDnC,EAAEY,MAAMkB,QAAQ,cAAcC,KAAK,WAAWG,KAAK"}